<div class="card">
    <p-table #dt1 [value]="customers" [globalFilterFields]="['fullName','representative.name','status']"
        selectionMode="single" [(selection)]="selectedCustomers" dataKey="id" [rows]="5" [paginator]="true"
        stateStorage="session" stateKey="statedemo-session" [tableStyle]="{ 'min-width': '50rem' }">

        <!-- Global Filter -->
        <ng-template #caption>
            <p-iconfield iconPosition="left">
                <p-inputicon><i class="pi pi-search"></i></p-inputicon>
                <input pInputText type="text" [value]="globalFilterValue"
                    (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
            </p-iconfield>
        </ng-template>

        <!-- Table Header -->
        <ng-template #header>
            <tr>
                <th pSortableColumn="fullName" style="width:33%">
                    <div class="flex items-center gap-2">
                        Name
                        <p-sortIcon field="fullName"></p-sortIcon>
                    </div>
                </th>
                <th pSortableColumn="representative.name" style="width:33%">
                    <div class="flex items-center gap-2">
                        Representative
                        <p-sortIcon field="representative.name"></p-sortIcon>
                    </div>
                </th>
                <th pSortableColumn="status" style="width:34%">
                    <div class="flex items-center gap-2">
                        Status
                        <p-sortIcon field="status"></p-sortIcon>
                    </div>
                </th>
            </tr>
        </ng-template>

        <!-- Table Body -->
        <ng-template #body let-customer>
            <tr [pSelectableRow]="customer">
                <!-- Name -->
                <td>{{ customer.fullName }}</td>

                <!-- Representative -->
                <td class="flex items-center gap-2">
                    <img [src]="customer.representative?.imageUrl || 'https://primefaces.org/cdn/primeng/images/demo/avatar/placeholder.png'"
                        [alt]="customer.representative?.name" width="32"
                        style="border-radius:50%; vertical-align:middle;" />
                    <span>{{ customer.representative?.name }}</span>
                </td>

                <!-- Status -->
                <td>
                    <p-tag [value]="customer.status" [severity]="getSeverity(customer.status)"></p-tag>
                </td>
            </tr>
        </ng-template>

        <!-- Empty message -->
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="3">No customers found.</td>
            </tr>
        </ng-template>

    </p-table>
</div>